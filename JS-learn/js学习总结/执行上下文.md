# 执行上下文

## 什么是执行上下文

在生活中相同的话在不同的场合说会有不同的含义。而这个所谓的场合就是语境。

而在JS中,所谓的语境就是指的是**上下文**

比如：你和你的好基友在校门口等家长来接,人很多你们找不到各自的家长,突然好基友一拍你的肩膀然后指了一下远方，**你问**:谁？**你的好基友说**：你妈！

上文中的含义好基友的意思表示的是你的妈妈来接你了快看。而并不是在骂人。这就是所谓的上下文。大概意思表述清楚了哈。

用官方些的话来讲：

> 执行上下文就是`javascript`代码被解析和执行时所在环境的抽象概念。

### 执行上下文的类型与特点

js中,执行上下文有3种**类型**:

* **全局执行上下文**：只有一个也就是浏览器(window)对象
* **函数执行上下文**：有无数个但只有函数被**调用**的时候才会被**创建**，每次调用都会创建一个**新**的上下文
* **Eval函数执行上下文**： js的eval函数执行其内部的代码会创建属于自己的上下文。**很少且不建议使用**



**特点**:

1. 单线程，只在主线程上运行；
2. 同步执行，从上向下按顺序执行；
3. 全局上下文只有一个，也就是`window`对象；
4. 函数执行上下文没有限制；
5. 函数每调用一次就会产生一个新的执行上下文环境。



### JS如何管理多个执行上下文?

通过上面的描述,我们都知道了js代码在运行时会出现无数个执行上下文,那么js是如何管理这些执行上下文的呢？

而我们都知道JS是一门**单线程**语言，所以js不能够同时做2件事情,而必须一个一个的执行，那这么多的执行上下文是按照什么顺序来执行的呢？

#### 执行栈

JS通过**执行栈**管理多个执行上下文，执行栈也被称为**`调用栈`**。

其**作用**就是: 存储在代码执行期间的所有执行上下文

#### 上下文生命周期

**执行栈**上下文的生命周期分为以下3个阶段

1. **创建阶段**
2. **执行阶段**
3. **销毁阶段**

##### 创建阶段

创建阶段主要做以下事情:

1. 确定了**this**的值，换句话说就是**绑定this**

2. **词法环境**的创建

3. **变量环境**的创建

   下面放一张盗来的图便于理解

![executionContext1](https://user-gold-cdn.xitu.io/2019/10/29/16e182699428e6de?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

